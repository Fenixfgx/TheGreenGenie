<!DOCTYPE html>
<html style="overflow: hidden;">
<head>
    <title>Página Principal</title>
</head>
<body style="background-image: url(https://www.thegreengenie.com.co/images/favicon.png?rand=c5e2); background-repeat: no-repeat; background-position-x: center; background-position-y: 120px;">
    <div style=" background-color: #ffffffe0; width: 840px; margin: auto; text-align: -webkit-center; height: 31px;  padding-top: 12px; padding-bottom: 12px; border-bottom-right-radius: 50px; border-bottom-left-radius: 50px; z-index: 2; position: fixed; left: 20%; box-shadow: 0px 4px 9px 0px #409b0757;">
    <input class="text" type="date" id="fechaIn" placeholder="Fecha" onchange="actualizarFormatoFecha()" style="border-radius: 12px; padding: 6px; border-color: #00000000; box-shadow: 2px 2px 9px 0 #8080808c;">
    <select id="destinatarioInput" onchange="sincronizarSelect()" style="border-radius: 12px; padding: 6px; border-color: #00000000; box-shadow: 2px 2px 9px 0 #8080808c;">
        <!-- Las opciones se llenarán dinámicamente mediante JavaScript -->
    </select>
    <button id="buscarFuera" style="border-radius: 12px; padding: 6px; border-color: #00000000; box-shadow: 2px 2px 9px 0 #8080808c; background-color: white; margin-left: 5px;">Buscar</button><button onclick="mostrarOcultar()" style="border-radius: 12px;padding: 6px;border-color: #00000000;box-shadow: 2px 2px 9px 0 #8080808c;background-color: white;margin-left: 5px;">MUISCA</button><button onclick="mostrarOcultar2()" style="border-radius: 12px;padding: 6px;border-color: #00000000;box-shadow: 2px 2px 9px 0 #8080808c;background-color: white;margin-left: 5px;">GDD</button><button onclick="mostrarOcultar1()" style="border-radius: 12px;padding: 6px;border-color: #00000000;box-shadow: 2px 2px 9px 0 #8080808c;background-color: white;margin-left: 5px;"> Generar ▶ </button></div>
    <br><br>
    <div id="miSeccion" style=" display: none; position: absolute; border-radius: 12px; padding: 6px; border-color: #00000000; box-shadow: 2px 2px 9px 0 #8080808c; background-color: white; margin-left: 25px; right: 25px; top: 80px; width: 502px; height: 502px; ">
        <iframe style="border:none;" src="https://www.thegreengenie.com.co/TEST/IF/MUISCA/index.html" width="500" height="500"></iframe>
  </div>
    <div id="miSeccion1" style=" display: none; position: absolute; border-radius: 12px; padding: 6px; margin-left: 25px; right: 40px; top: 80px; width: 300px; height: 430px; ">
        <iframe style="border:none; border-radius:20px;" src="https://script.google.com/macros/s/AKfycbyDBZmcPb2Gdx-gfbh6ZSdlc5FmhuYXxgJzp1S8EqF7zUHO3NgXUYvRchAfHt5c4Ks1tg/exec" width="300px" height="430px"></iframe>
  </div>
  <div id="miSeccion2" style=" display: none; position: absolute; border-radius: 12px; padding: 6px; border-color: #00000000; box-shadow: 2px 2px 9px 0 #8080808c; background-color: white; margin-top: -25px; width: 95%; height: 95%; z-index: 7 ">
   <button onclick="mostrarOcultar2()" style="border-radius: 12px;padding: 6px;border-color: #00000000;box-shadow: 2px 2px 9px 0 #8080808c;background-color: white;margin-left: 5px;">CLOSE</button>
   <iframe style="border:none;" src="https://www.thegreengenie.com.co/018000110711/GEN/" width="100%" height="90%"></iframe>
  </div>
<style>
    #load {
      display: block;
      position: absolute;
      background-color: #fcfcff;
      width: 100%;
      height: 100%;
      z-index: 7;
      margin-top: -28px;
    }
  </style>
    <div id="load">
   <image style="border:none;position: absolute;margin-left: 10%;" src="https://www.thegreengenie.com.co/load/load.gif" width="80%">
  </div>
    <script>
  // Esperar a que el documento esté completamente cargado
  document.addEventListener("DOMContentLoaded", function() {
    // Obtener el elemento con id "load"
    var loadElement = document.getElementById("load");

    // Mostrar el elemento
    loadElement.style.display = "block";

    // Esperar 33 segundos (33000 milisegundos)
    setTimeout(function() {
      // Ocultar el elemento después de 33 segundos
      loadElement.style.display = "none";
    }, 21500);
  });
</script>
    <iframe style="border:none; margin-top: 7px;" src="https://www.thegreengenie.com.co/TEST/IF/Factura/index.html" id="miIframe1" width="300" height="850"></iframe>
    <iframe style="border:none; margin-top: 7px;" src="https://www.thegreengenie.com.co/TEST/IF/Carta/index.html" id="miIframe2" width="300" height="850"></iframe>
    <iframe style="border:none; margin-top: 7px;" src="https://www.thegreengenie.com.co/TEST/IF/Planilla/index.html" id="miIframe3" width="300" height="850"></iframe>

    <script>
        const iframes = [
            document.getElementById('miIframe1').contentWindow,
            document.getElementById('miIframe2').contentWindow,
            document.getElementById('miIframe3').contentWindow
        ];

        document.getElementById('buscarFuera').addEventListener('click', function() {
            iframes.forEach(function(iframeWindow) {
                iframeWindow.postMessage('buscarDentro', '*');
            });
        });

        function actualizarFormatoFecha() {
            const fecha = document.getElementById('fechaIn').value;
            iframes.forEach(function(iframeWindow) {
                iframeWindow.postMessage({ tipo: 'actualizarFecha', fecha: fecha }, '*');
            });
        }

        function sincronizarSelect() {
            const selectPrincipal = document.getElementById('destinatarioInput');
            const selectedOption = selectPrincipal.options[selectPrincipal.selectedIndex].value;

            iframes.forEach(function(iframeWindow) {
                iframeWindow.postMessage({ tipo: 'sincronizarSelect', selectedOption: selectedOption }, '*');
            });
        }

        window.addEventListener('message', function(event) {
            if (event.data === 'activarBotonBuscar') {
                iframes.forEach(function(iframeWindow) {
                    const botonDentroIframe = iframeWindow.document.getElementById('buscarDentro');
                    botonDentroIframe.click();
                });
            }

            if (event.data.tipo === 'actualizarSelect') {
                const selectPrincipal = document.getElementById('destinatarioInput');
                selectPrincipal.innerHTML = event.data.options;
            }
        });
    </script>
    <script>
    function mostrarOcultar() {
      var seccion = document.getElementById("miSeccion");
      if (seccion.style.display === "none") {
        seccion.style.display = "block";
      } else {
        seccion.style.display = "none";
      }
    }
  </script>
    <script>
    function mostrarOcultar1() {
      var seccion = document.getElementById("miSeccion1");
      if (seccion.style.display === "none") {
        seccion.style.display = "block";
      } else {
        seccion.style.display = "none";
      }
    }
  </script>
    <script>
    function mostrarOcultar2() {
      var seccion = document.getElementById("miSeccion2");
      if (seccion.style.display === "none") {
        seccion.style.display = "block";
      } else {
        seccion.style.display = "none";
      }
    }
  </script>
</body>
</html>
